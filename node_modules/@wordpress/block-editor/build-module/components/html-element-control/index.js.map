{"version":3,"names":["__","sprintf","SelectControl","Notice","__experimentalVStack","VStack","useSelect","store","blockEditorStore","htmlElementMessages","jsx","_jsx","jsxs","_jsxs","HTMLElementControl","tagName","onChange","clientId","options","label","value","checkForMainTag","some","option","hasMainElementElsewhere","select","getClientIdsWithDescendants","getBlockAttributes","id","modifiedOptions","map","disabled","spacing","className","children","__nextHasNoMarginBottom","__next40pxDefaultSize","help","status","isDismissible"],"sources":["@wordpress/block-editor/src/components/html-element-control/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tSelectControl,\n\tNotice,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { htmlElementMessages } from './messages';\n\n/**\n * Renders a SelectControl for choosing HTML elements with validation\n * to prevent duplicate <main> elements.\n *\n * @param {Object}   props          Component props.\n * @param {string}   props.tagName  The current HTML tag name.\n * @param {Function} props.onChange Function to call when the tag is changed.\n * @param {string}   props.clientId Optional. The client ID of the block. Used to check for existing <main> elements.\n * @param {Array}    props.options  SelectControl options (optional).\n *\n * @return {Component} The HTML element select control with validation.\n */\nexport default function HTMLElementControl( {\n\ttagName,\n\tonChange,\n\tclientId,\n\toptions = [\n\t\t{ label: __( 'Default (<div>)' ), value: 'div' },\n\t\t{ label: '<header>', value: 'header' },\n\t\t{ label: '<main>', value: 'main' },\n\t\t{ label: '<section>', value: 'section' },\n\t\t{ label: '<article>', value: 'article' },\n\t\t{ label: '<aside>', value: 'aside' },\n\t\t{ label: '<footer>', value: 'footer' },\n\t],\n} ) {\n\tconst checkForMainTag =\n\t\t!! clientId && options.some( ( option ) => option.value === 'main' );\n\n\tconst hasMainElementElsewhere = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! checkForMainTag ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst { getClientIdsWithDescendants, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn getClientIdsWithDescendants().some( ( id ) => {\n\t\t\t\t// Skip the current block.\n\t\t\t\tif ( id === clientId ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn getBlockAttributes( id )?.tagName === 'main';\n\t\t\t} );\n\t\t},\n\t\t[ clientId, checkForMainTag ]\n\t);\n\n\t// Create a modified options array that disables the main option if needed.\n\tconst modifiedOptions = options.map( ( option ) => {\n\t\tif (\n\t\t\toption.value === 'main' &&\n\t\t\thasMainElementElsewhere &&\n\t\t\ttagName !== 'main'\n\t\t) {\n\t\t\treturn {\n\t\t\t\t...option,\n\t\t\t\tdisabled: true,\n\t\t\t\tlabel: sprintf(\n\t\t\t\t\t/* translators: %s: HTML element name */\n\t\t\t\t\t__( '%s (Already in use)' ),\n\t\t\t\t\toption.label\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\t\treturn option;\n\t} );\n\n\treturn (\n\t\t<VStack spacing={ 2 } className=\"block-editor-html-element-control\">\n\t\t\t<SelectControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'HTML element' ) }\n\t\t\t\toptions={ modifiedOptions }\n\t\t\t\tvalue={ tagName }\n\t\t\t\tonChange={ onChange }\n\t\t\t\thelp={ htmlElementMessages[ tagName ] }\n\t\t\t/>\n\n\t\t\t{ tagName === 'main' && hasMainElementElsewhere && (\n\t\t\t\t<Notice status=\"warning\" isDismissible={ false }>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Multiple <main> elements detected. The duplicate may be in your content or template. This is not valid HTML and may cause accessibility issues. Please change this HTML element.'\n\t\t\t\t\t) }\n\t\t\t\t</Notice>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}