{
  "version": 3,
  "sources": ["../../../src/slot-fill/bubbles-virtually/slot-fill-provider.tsx"],
  "sourcesContent": ["/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport { isShallowEqual } from '@wordpress/is-shallow-equal';\nimport { observableMap } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport SlotFillContext from './slot-fill-context';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction createSlotRegistry() {\n  const slots = observableMap();\n  const fills = observableMap();\n  const registerSlot = (name, ref, fillProps) => {\n    slots.set(name, {\n      ref,\n      fillProps\n    });\n  };\n  const unregisterSlot = (name, ref) => {\n    const slot = slots.get(name);\n    if (!slot) {\n      return;\n    }\n\n    // Make sure we're not unregistering a slot registered by another element\n    // See https://github.com/WordPress/gutenberg/pull/19242#issuecomment-590295412\n    if (slot.ref !== ref) {\n      return;\n    }\n    slots.delete(name);\n  };\n  const updateSlot = (name, ref, fillProps) => {\n    const slot = slots.get(name);\n    if (!slot) {\n      return;\n    }\n    if (slot.ref !== ref) {\n      return;\n    }\n    if (isShallowEqual(slot.fillProps, fillProps)) {\n      return;\n    }\n    slots.set(name, {\n      ref,\n      fillProps\n    });\n  };\n  const registerFill = (name, ref) => {\n    fills.set(name, [...(fills.get(name) || []), ref]);\n  };\n  const unregisterFill = (name, ref) => {\n    const fillsForName = fills.get(name);\n    if (!fillsForName) {\n      return;\n    }\n    fills.set(name, fillsForName.filter(fillRef => fillRef !== ref));\n  };\n  return {\n    slots,\n    fills,\n    registerSlot,\n    updateSlot,\n    unregisterSlot,\n    registerFill,\n    unregisterFill\n  };\n}\nexport default function SlotFillProvider({\n  children\n}) {\n  const [registry] = useState(createSlotRegistry);\n  return /*#__PURE__*/_jsx(SlotFillContext.Provider, {\n    value: registry,\n    children: children\n  });\n}"],
  "mappings": ";AAGA,SAAS,gBAAgB;AACzB,SAAS,sBAAsB;AAC/B,SAAS,qBAAqB;AAK9B,OAAO,qBAAqB;AAC5B,SAAS,OAAO,YAAY;AAC5B,SAAS,qBAAqB;AAC5B,QAAM,QAAQ,cAAc;AAC5B,QAAM,QAAQ,cAAc;AAC5B,QAAM,eAAe,CAAC,MAAM,KAAK,cAAc;AAC7C,UAAM,IAAI,MAAM;AAAA,MACd;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AACA,QAAM,iBAAiB,CAAC,MAAM,QAAQ;AACpC,UAAM,OAAO,MAAM,IAAI,IAAI;AAC3B,QAAI,CAAC,MAAM;AACT;AAAA,IACF;AAIA,QAAI,KAAK,QAAQ,KAAK;AACpB;AAAA,IACF;AACA,UAAM,OAAO,IAAI;AAAA,EACnB;AACA,QAAM,aAAa,CAAC,MAAM,KAAK,cAAc;AAC3C,UAAM,OAAO,MAAM,IAAI,IAAI;AAC3B,QAAI,CAAC,MAAM;AACT;AAAA,IACF;AACA,QAAI,KAAK,QAAQ,KAAK;AACpB;AAAA,IACF;AACA,QAAI,eAAe,KAAK,WAAW,SAAS,GAAG;AAC7C;AAAA,IACF;AACA,UAAM,IAAI,MAAM;AAAA,MACd;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AACA,QAAM,eAAe,CAAC,MAAM,QAAQ;AAClC,UAAM,IAAI,MAAM,CAAC,GAAI,MAAM,IAAI,IAAI,KAAK,CAAC,GAAI,GAAG,CAAC;AAAA,EACnD;AACA,QAAM,iBAAiB,CAAC,MAAM,QAAQ;AACpC,UAAM,eAAe,MAAM,IAAI,IAAI;AACnC,QAAI,CAAC,cAAc;AACjB;AAAA,IACF;AACA,UAAM,IAAI,MAAM,aAAa,OAAO,aAAW,YAAY,GAAG,CAAC;AAAA,EACjE;AACA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AACe,SAAR,iBAAkC;AAAA,EACvC;AACF,GAAG;AACD,QAAM,CAAC,QAAQ,IAAI,SAAS,kBAAkB;AAC9C,SAAoB,qBAAK,gBAAgB,UAAU;AAAA,IACjD,OAAO;AAAA,IACP;AAAA,EACF,CAAC;AACH;",
  "names": []
}
